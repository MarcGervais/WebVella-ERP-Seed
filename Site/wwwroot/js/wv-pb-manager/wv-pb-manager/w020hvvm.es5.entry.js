WvPbManager.loadBundle("w020hvvm",["exports","./chunk-a764e1b5.js"],function(e,t){var n=window.WvPbManager.h,o=function(e,t){return function(){for(var n=new Array(arguments.length),o=0;o<n.length;o++)n[o]=arguments[o];return e.apply(t,n)}};function r(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}var a=Object.prototype.toString;function i(e){return"[object Array]"===a.call(e)}function s(e){return null!==e&&"object"==typeof e}function d(e){return"[object Function]"===a.call(e)}function c(e,t){if(null!=e)if("object"!=typeof e&&(e=[e]),i(e))for(var n=0,o=e.length;n<o;n++)t.call(null,e[n],n,e);else for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.call(null,e[r],r,e)}var l={isArray:i,isArrayBuffer:function(e){return"[object ArrayBuffer]"===a.call(e)},isBuffer:function(e){return null!=e&&(r(e)||function(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&r(e.slice(0,0))}(e)||!!e._isBuffer)},isFormData:function(e){return"undefined"!=typeof FormData&&e instanceof FormData},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:s,isUndefined:function(e){return void 0===e},isDate:function(e){return"[object Date]"===a.call(e)},isFile:function(e){return"[object File]"===a.call(e)},isBlob:function(e){return"[object Blob]"===a.call(e)},isFunction:d,isStream:function(e){return s(e)&&d(e.pipe)},isURLSearchParams:function(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product)&&"undefined"!=typeof window&&"undefined"!=typeof document},forEach:c,merge:function e(){var t={};function n(n,o){t[o]="object"==typeof t[o]&&"object"==typeof n?e(t[o],n):n}for(var o=0,r=arguments.length;o<r;o++)c(arguments[o],n);return t},extend:function(e,t,n){return c(t,function(t,r){e[r]=n&&"function"==typeof t?o(t,n):t}),e},trim:function(e){return e.replace(/^\s*/,"").replace(/\s*$/,"")}},u="undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{};function p(){throw new Error("setTimeout has not been defined")}function f(){throw new Error("clearTimeout has not been defined")}var v=p,h=f;function m(e){if(v===setTimeout)return setTimeout(e,0);if((v===p||!v)&&setTimeout)return v=setTimeout,setTimeout(e,0);try{return v(e,0)}catch(t){try{return v.call(null,e,0)}catch(t){return v.call(this,e,0)}}}"function"==typeof u.setTimeout&&(v=setTimeout),"function"==typeof u.clearTimeout&&(h=clearTimeout);var g,y=[],b=!1,w=-1;function N(){b&&g&&(b=!1,g.length?y=g.concat(y):w=-1,y.length&&I())}function I(){if(!b){var e=m(N);b=!0;for(var t=y.length;t;){for(g=y,y=[];++w<t;)g&&g[w].run();w=-1,t=y.length}g=null,b=!1,function(e){if(h===clearTimeout)return clearTimeout(e);if((h===f||!h)&&clearTimeout)return h=clearTimeout,clearTimeout(e);try{h(e)}catch(t){try{return h.call(null,e)}catch(t){return h.call(this,e)}}}(e)}}function C(e,t){this.fun=e,this.array=t}function E(){}C.prototype.run=function(){this.fun.apply(null,this.array)};var S=E,_=E,x=E,O=E,T=E,M=E,L=E,A=u.performance||{},P=A.now||A.mozNow||A.msNow||A.oNow||A.webkitNow||function(){return(new Date).getTime()},k=new Date,R={nextTick:function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];y.push(new C(e,t)),1!==y.length||b||m(I)},title:"browser",browser:!0,env:{},argv:[],version:"",versions:{},on:S,addListener:_,once:x,off:O,removeListener:T,removeAllListeners:M,emit:L,binding:function(e){throw new Error("process.binding is not supported")},cwd:function(){return"/"},chdir:function(e){throw new Error("process.chdir is not supported")},umask:function(){return 0},hrtime:function(e){var t=.001*P.call(A),n=Math.floor(t),o=Math.floor(t%1*1e9);return e&&(n-=e[0],(o-=e[1])<0&&(n--,o+=1e9)),[n,o]},platform:"browser",release:{},config:{},uptime:function(){return(new Date-k)/1e3}},j=function(e,t,n,o,r){return function(e,t,n,o,r){return e.config=t,n&&(e.code=n),e.request=o,e.response=r,e}(new Error(e),t,n,o,r)};function H(e){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var D=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"],B=l.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function o(e){var o=e;return t&&(n.setAttribute("href",o),o=n.href),n.setAttribute("href",o),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return e=o(window.location.href),function(t){var n=l.isString(t)?o(t):t;return n.protocol===e.protocol&&n.host===e.host}}():function(){return!0};function U(){this.message="String contains an invalid character"}(U.prototype=new Error).code=5,U.prototype.name="InvalidCharacterError";var V=l.isStandardBrowserEnv()?{write:function(e,t,n,o,r,a){var i=[];i.push(e+"="+encodeURIComponent(t)),l.isNumber(n)&&i.push("expires="+new Date(n).toGMTString()),l.isString(o)&&i.push("path="+o),l.isString(r)&&i.push("domain="+r),!0===a&&i.push("secure"),document.cookie=i.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}},F="undefined"!=typeof window&&window.btoa&&window.btoa.bind(window)||function(e){for(var t,n,o=String(e),r="",a=0,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";o.charAt(0|a)||(i="=",a%1);r+=i.charAt(63&t>>8-a%1*8)){if((n=o.charCodeAt(a+=.75))>255)throw new U;t=t<<8|n}return r},W=function(e){return new Promise(function(t,n){var o=e.data,r=e.headers;l.isFormData(o)&&delete r["Content-Type"];var a=new XMLHttpRequest,i="onreadystatechange",s=!1;if("test"===R.env.NODE_ENV||"undefined"==typeof window||!window.XDomainRequest||"withCredentials"in a||B(e.url)||(a=new window.XDomainRequest,i="onload",s=!0,a.onprogress=function(){},a.ontimeout=function(){}),e.auth&&(r.Authorization="Basic "+F((e.auth.username||"")+":"+(e.auth.password||""))),a.open(e.method.toUpperCase(),function(e,t,n){if(!t)return e;var o;if(n)o=n(t);else if(l.isURLSearchParams(t))o=t.toString();else{var r=[];l.forEach(t,function(e,t){null!=e&&(l.isArray(e)?t+="[]":e=[e],l.forEach(e,function(e){l.isDate(e)?e=e.toISOString():l.isObject(e)&&(e=JSON.stringify(e)),r.push(H(t)+"="+H(e))}))}),o=r.join("&")}return o&&(e+=(-1===e.indexOf("?")?"?":"&")+o),e}(e.url,e.params,e.paramsSerializer),!0),a.timeout=e.timeout,a[i]=function(){if(a&&(4===a.readyState||s)&&(0!==a.status||a.responseURL&&0===a.responseURL.indexOf("file:"))){var o,r,i,d,c,u="getAllResponseHeaders"in a?(o=a.getAllResponseHeaders(),c={},o?(l.forEach(o.split("\n"),function(e){if(d=e.indexOf(":"),r=l.trim(e.substr(0,d)).toLowerCase(),i=l.trim(e.substr(d+1)),r){if(c[r]&&D.indexOf(r)>=0)return;c[r]="set-cookie"===r?(c[r]?c[r]:[]).concat([i]):c[r]?c[r]+", "+i:i}}),c):c):null;!function(e,t,n){var o=n.config.validateStatus;n.status&&o&&!o(n.status)?t(j("Request failed with status code "+n.status,n.config,null,n.request,n)):e(n)}(t,n,{data:e.responseType&&"text"!==e.responseType?a.response:a.responseText,status:1223===a.status?204:a.status,statusText:1223===a.status?"No Content":a.statusText,headers:u,config:e,request:a}),a=null}},a.onerror=function(){n(j("Network Error",e,null,a)),a=null},a.ontimeout=function(){n(j("timeout of "+e.timeout+"ms exceeded",e,"ECONNABORTED",a)),a=null},l.isStandardBrowserEnv()){var d=V,c=(e.withCredentials||B(e.url))&&e.xsrfCookieName?d.read(e.xsrfCookieName):void 0;c&&(r[e.xsrfHeaderName]=c)}if("setRequestHeader"in a&&l.forEach(r,function(e,t){void 0===o&&"content-type"===t.toLowerCase()?delete r[t]:a.setRequestHeader(t,e)}),e.withCredentials&&(a.withCredentials=!0),e.responseType)try{a.responseType=e.responseType}catch(t){if("json"!==e.responseType)throw t}"function"==typeof e.onDownloadProgress&&a.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&a.upload&&a.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then(function(e){a&&(a.abort(),n(e),a=null)}),void 0===o&&(o=null),a.send(o)})},G={"Content-Type":"application/x-www-form-urlencoded"};function q(e,t){!l.isUndefined(e)&&l.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var X,J={adapter:("undefined"!=typeof XMLHttpRequest?X=W:void 0!==R&&(X=W),X),transformRequest:[function(e,t){return function(e,t){l.forEach(e,function(t,n){"Content-Type"!==n&&n.toUpperCase()==="Content-Type".toUpperCase()&&(e["Content-Type"]=t,delete e[n])})}(t),l.isFormData(e)||l.isArrayBuffer(e)||l.isBuffer(e)||l.isStream(e)||l.isFile(e)||l.isBlob(e)?e:l.isArrayBufferView(e)?e.buffer:l.isURLSearchParams(e)?(q(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):l.isObject(e)?(q(t,"application/json;charset=utf-8"),JSON.stringify(e)):e}],transformResponse:[function(e){if("string"==typeof e)try{e=JSON.parse(e)}catch(e){}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};l.forEach(["delete","get","head"],function(e){J.headers[e]={}}),l.forEach(["post","put","patch"],function(e){J.headers[e]=l.merge(G)});var Y=J;function z(){this.handlers=[]}z.prototype.use=function(e,t){return this.handlers.push({fulfilled:e,rejected:t}),this.handlers.length-1},z.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},z.prototype.forEach=function(e){l.forEach(this.handlers,function(t){null!==t&&e(t)})};var K=z,$=function(e,t,n){return l.forEach(n,function(n){e=n(e,t)}),e},Q=function(e){return!(!e||!e.__CANCEL__)};function Z(e){e.cancelToken&&e.cancelToken.throwIfRequested()}var ee=function(e){var t,n;return Z(e),e.baseURL&&!/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e.url)&&(e.url=(t=e.baseURL,(n=e.url)?t.replace(/\/+$/,"")+"/"+n.replace(/^\/+/,""):t)),e.headers=e.headers||{},e.data=$(e.data,e.headers,e.transformRequest),e.headers=l.merge(e.headers.common||{},e.headers[e.method]||{},e.headers||{}),l.forEach(["delete","get","head","post","put","patch","common"],function(t){delete e.headers[t]}),(e.adapter||Y.adapter)(e).then(function(t){return Z(e),t.data=$(t.data,t.headers,e.transformResponse),t},function(t){return Q(t)||(Z(e),t&&t.response&&(t.response.data=$(t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)})};function te(e){this.defaults=e,this.interceptors={request:new K,response:new K}}te.prototype.request=function(e){"string"==typeof e&&(e=l.merge({url:arguments[0]},arguments[1])),(e=l.merge(Y,{method:"get"},this.defaults,e)).method=e.method.toLowerCase();var t=[ee,void 0],n=Promise.resolve(e);for(this.interceptors.request.forEach(function(e){t.unshift(e.fulfilled,e.rejected)}),this.interceptors.response.forEach(function(e){t.push(e.fulfilled,e.rejected)});t.length;)n=n.then(t.shift(),t.shift());return n},l.forEach(["delete","get","head","options"],function(e){te.prototype[e]=function(t,n){return this.request(l.merge(n||{},{method:e,url:t}))}}),l.forEach(["post","put","patch"],function(e){te.prototype[e]=function(t,n,o){return this.request(l.merge(o||{},{method:e,url:t,data:n}))}});var ne=te;function oe(e){this.message=e}oe.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},oe.prototype.__CANCEL__=!0;var re=oe;function ae(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise(function(e){t=e});var n=this;e(function(e){n.reason||(n.reason=new re(e),t(n.reason))})}ae.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},ae.source=function(){var e;return{token:new ae(function(t){e=t}),cancel:e}};var ie=ae;function se(e){var t=new ne(e),n=o(ne.prototype.request,t);return l.extend(n,ne.prototype,t),l.extend(n,t),n}var de=se(Y);de.Axios=ne,de.create=function(e){return se(l.merge(Y,e))},de.Cancel=re,de.CancelToken=ie,de.isCancel=Q,de.all=function(e){return Promise.all(e)},de.spread=function(e){return function(t){return e.apply(null,t)}};var ce=de;ce.default=de;var le=ce,ue=function(){this.node=null,this.component_name=null,this.original_event=null};function pe(e,t){var n=e.store.getState().createdNode;n.component_name=t.name,n.options=JSON.stringify(n.options);var o=e.store.getState().siteRootUrl+"/api/v3.0/page/"+n.page_id+"/node/create",r=e.store.getState().recordId;r&&(o+="?recId="+r),le.post(o,n,{headers:{"Content-Type":"application/json;charset=UTF-8","Access-Control-Allow-Origin":"*"}}).then(function(t){e.addNode(t.data),window.setTimeout(function(){e.addReloadNodeIds(t.data.id);var o=new Event("WvPbManager_Node_Added"),r=new ue;r.original_event=event,r.node=n,r.component_name=n.component_name,o.payload=r,document.dispatchEvent(o)},10)}).catch(function(e){e.response?e.response.data?alert(e.response.data):alert(e.response.statusText):e.message?alert(e.message):alert(e)})}function fe(e){var n=e.store.getState().library,o=[];switch((o=e.filterString?t._.filter(n,function(t){var n=t.label.toLowerCase().includes(e.filterString.toLowerCase());return n||(n=t.library.toLowerCase().includes(e.filterString.toLowerCase())),n||(n=t.description.toLowerCase().includes(e.filterString.toLowerCase())),n}):n)||(o=[]),e.sort){case"usage":o=t._.orderBy(o,["usage_counter"],["desc"]);break;case"alpha":o=t._.orderBy(o,["label"],["asc"]);break;default:o=t._.orderBy(o,["last_used_on"],["desc"])}var r=(e.page-1)*e.pageSize,a=r+e.pageSize,i=o.length;a>i&&(a=i),e.total=i,e.pageCount=e.total/e.pageSize,e.componentList=t._.slice(o,r,a)}var ve=function(){function e(){this.isCreateModalVisible=!1,this.page=1,this.pageSize=24,this.sort="recent",this.componentList=new Array,this.total=0,this.pageCount=0,this.focused=!1}return e.prototype.componentWillLoad=function(){this.store.mapStateToProps(this,function(e){return{isCreateModalVisible:e.isCreateModalVisible}}),this.store.mapDispatchToProps(this,{setNodeCreation:t.setNodeCreation,addNode:t.addNode,addReloadNodeIds:t.addReloadNodeIds}),document.body.className=document.body.className.replace(" modal-open","").replace("modal-open",""),document.body.style.paddingRight=null;var e=document.getElementById("wv-pb-backdrop");e&&e.parentNode.removeChild(e),fe(this)},e.prototype.cancelNodeCreateHandler=function(e){e.preventDefault(),e.stopPropagation(),this.filterString="",fe(this),this.setNodeCreation(null)},e.prototype.filterChangeHandler=function(e){e.preventDefault(),e.stopPropagation(),this.filterString=e.target.value,this.page=1,fe(this)},e.prototype.selectComponent=function(e,t){e.preventDefault(),e.stopPropagation(),pe(this,t),this.filterString="",fe(this)},e.prototype.changeSort=function(e,t){e.preventDefault(),this.sort=t,this.page=1,fe(this)},e.prototype.changePage=function(e,t){e.preventDefault(),t>0&&(this.page=t),fe(this)},e.prototype.render=function(){var e=this;if(!e.isCreateModalVisible)return e.focused=!1,e.filterString="",this.page=1,this.sort="recent",null;e.focused||window.setTimeout(function(){var t=document.getElementById("wv-pb-select-component-input");t&&(t.focus(),e.focused=!0)},10);for(var t=[0,1,2,3],o=[],r=1;r<e.pageCount+1;r++)o.push(r);return n("div",{class:"modal show d-block",style:{paddingRight:"17px"}},n("div",{class:"modal-dialog modal-full"},n("div",{class:"modal-content"},n("div",{class:"modal-header d-none"},n("h5",{class:"modal-title"},"Select component"),n("button",{type:"button",class:"close",onClick:function(t){return e.cancelNodeCreateHandler(t)}},n("span",{"aria-hidden":"true"},"×"))),n("div",{class:"modal-body"},n("nav",{class:"navbar navbar-expand-lg navbar-light mb-3 go-bkg-blue-gray-light"},n("div",{class:"flex-grow-1"},n("ul",{class:"nav nav-pills"},n("li",{class:"nav-item"},n("a",{class:"nav-link "+("recent"===e.sort?"active":""),href:"#",onClick:function(t){return e.changeSort(t,"recent")}},"Recent")),n("li",{class:"nav-item"},n("a",{class:"nav-link "+("usage"===e.sort?"active":""),href:"#",onClick:function(t){return e.changeSort(t,"usage")}},"Most Used")),n("li",{class:"nav-item"},n("a",{class:"nav-link "+("alpha"===e.sort?"active":""),href:"#",onClick:function(t){return e.changeSort(t,"alpha")}},"Alphabetical")))),n("div",{class:"form-inline"},n("input",{class:"form-control form-control-sm",placeholder:"component name",onInput:function(t){return e.filterChangeHandler(t)},id:"wv-pb-select-component-input"}))),e.componentList.map(function(o,r){return o=o,n("div",{class:"row"},t.map(function(t){var o=r+t;if(o<e.componentList.length&&r%4==0){var a=e.componentList[o],i="ti-file";return a.icon_class&&(i=a.icon_class),n("div",{class:"col-6 col-lg-3",key:a.name},n("div",{class:"shadow-sm mb-4 card icon-card clickable",onClick:function(t){return e.selectComponent(t,a)}},n("div",{class:"card-body p-1"},n("div",{class:"icon-card-body"},n("i",{class:"icon "+i}),n("div",{class:"meta"},n("div",{class:"title"},a.label),n("div",{class:"description"},a.description),n("div",{class:"library"},a.library))))))}}))}),n("nav",{"aria-label":"Page navigation example"},n("ul",{class:"pagination justify-content-center"},n("li",{class:"page-item "+(e.page>1?"":"disabled")},n("a",{class:"page-link",href:"#",onClick:function(t){return e.changePage(t,e.page-1)}},"Previous")),o.map(function(t){return n("li",{class:"page-item "+(e.page===t?"active":"")},n("a",{class:"page-link",href:"#",onClick:function(n){return e.changePage(n,t)}},t))}),n("li",{class:"page-item "+(e.page>=e.pageCount?"disabled":"")},n("a",{class:"page-link",href:"#",onClick:function(t){return e.changePage(t,e.page+1)}},"Next"))))),n("div",{class:"modal-footer"},n("button",{type:"button",class:"btn btn-white btn-sm",onClick:function(t){return e.cancelNodeCreateHandler(t)}},"Cancel")))))},Object.defineProperty(e,"is",{get:function(){return"wv-create-modal"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"properties",{get:function(){return{componentList:{state:!0},filterString:{state:!0},isCreateModalVisible:{state:!0},page:{state:!0},pageCount:{state:!0},pageSize:{state:!0},sort:{state:!0},store:{context:"store"},total:{state:!0}}},enumerable:!0,configurable:!0}),e}(),he=function(){function e(){this.isHelpModalVisible=!1}return e.prototype.componentWillLoad=function(){this.store.mapStateToProps(this,function(e){return{isHelpModalVisible:e.isHelpModalVisible}}),this.store.mapDispatchToProps(this,{setHelpModalState:t.setHelpModalState})},e.prototype.cancelHelpModalHandler=function(e){e.preventDefault(),e.stopPropagation(),this.setHelpModalState(!1)},e.prototype.render=function(){var e=this;return e.isHelpModalVisible?n("div",{class:"modal show d-block",style:{paddingRight:"17px"},id:"modal-component-help"},n("div",{class:"modal-dialog modal-xl"},n("div",{class:"modal-content"},n("div",{class:"modal-header"},n("span",{class:"title"},"Component help"),n("span",{class:"aside"},"wv-",e.store.getState().activeNodeId)),n("div",{class:"modal-body",id:"modal-component-help-body"},n("wv-show-help",{nodeId:e.store.getState().activeNodeId})),n("div",{class:"modal-footer"},n("button",{type:"button",class:"btn btn-white btn-sm",onClick:function(t){return e.cancelHelpModalHandler(t)}},"Close"))))):null},Object.defineProperty(e,"is",{get:function(){return"wv-help-modal"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"properties",{get:function(){return{isHelpModalVisible:{state:!0},store:{context:"store"}}},enumerable:!0,configurable:!0}),e}(),me=function(){function e(){}return e.prototype.render=function(){return n("div",{class:"p-2"},n("i",{class:"fa fa-spin fa-spinner go-blue"})," Loading...")},Object.defineProperty(e,"is",{get:function(){return"wv-loading-pane"},enumerable:!0,configurable:!0}),e}();function ge(){var e=document.createEvent("Event");e.initEvent("DOMContentLoaded",!0,!0),document.dispatchEvent(e)}var ye=["application/javascript","application/ecmascript","application/x-ecmascript","application/x-javascript","text/ecmascript","text/javascript","text/javascript1.0","text/javascript1.1","text/javascript1.2","text/javascript1.3","text/javascript1.4","text/javascript1.5","text/jscript","text/livescript","text/x-ecmascript","text/x-javascript"];function be(e){var t,n=e.querySelectorAll("script"),o=[];[].forEach.call(n,function(e){(t=e.getAttribute("type"))&&-1===ye.indexOf(t)||o.push(function(t){!function(e,t){var n=document.createElement("script");n.type="text/javascript",e.src?(n.onload=t,n.onerror=t,n.src=e.src):n.textContent=e.innerText,n.src.includes("http://localhost:3333/")&&(n.src=n.src.replace("http://localhost:3333/","http://localhost:2202/")),document.head.appendChild(n),e.parentNode.removeChild(e),e.src||t()}(e,t)})}),function e(t,n,o){void 0===o&&(o=0),t[o]&&t[o](function(){++o===t.length?n():e(t,n,o)})}(o,ge,0)}function we(e,n,o){"object"!=typeof e.options&&(e.options=e.options?JSON.parse(e.options):{});var r=o.store.getState().siteRootUrl+n.meta.design_view_url+"&nid="+e.id+"&pid="+e.page_id,a=o.store.getState().recordId;a&&(r+="&recId="+a),le.post(r,e.options,{headers:{"Content-Type":"application/json;charset=UTF-8","Access-Control-Allow-Origin":"*"}}).then(function(r){var a=document.getElementById("node-design-"+e.id),i=new Array,s=a.querySelectorAll("[data-node-id]");t._.forEach(s,function(e){i.push(e.getAttribute("data-node-id"))}),t._.forEach(i,function(e){Ne.MoveNodeToStack(e)}),a.remove();var d=document.createElement("div");d.id="node-design-"+e.id,d.classList.add("wv-pb-node"),d.innerHTML=r.data,document.getElementById("wv-node-design-stack").appendChild(d),be(d),o.updateNodeOptions(e),window.setTimeout(function(){i.push(e.id),o.addReloadNodeIds(i);var t=new Event("WvPbManager_Design_Loaded"),r=new ue;r.node=e,r.component_name=n.node.component_name,t.payload=r,document.dispatchEvent(t)},10)}).catch(function(e){e.response?e.response.data?console.log(e.response.data):console.log(e.response.statusText):e.message?console.log(e.message):console.log(e)})}var Ne=function(){function e(){}return e.MoveNodeToStack=function(e){if(!e)return console.error("node id not defined MoveNodeToStack "+e),!1;var t=document.getElementById("node-design-"+e),n=document.getElementById("wv-node-design-stack");return t&&t.parentElement.id==="wv-node-"+e&&n?(n.appendChild(t),!0):(n?console.error("error to-stack "+e):console.error("stack is missing "),!1)},e.GetNodeFromStack=function(e){if(!e)return console.error("node id not defined GetNodeFromStack "+e),!1;var t=document.getElementById("node-design-"+e),n=document.getElementById("wv-node-"+e);return t&&"wv-node-design-stack"===t.parentElement.id&&n?(n.appendChild(t),!0):!(!t||t.parentElement.id!=="wv-node-"+e)||!n},e.GetNodeFromServerToStack=function(e,t,n){we(e,t,n)},e.GetNodeAndMeta=function(e,n){var o={node:null,meta:null},r=e.store.getState().pageNodes,a=e.store.getState().library;if(n){var i=t._.findIndex(r,function(e){return e.id==n});if(-1==i)return void console.error("Node with id "+n+" not found in pageNodes");o.node=Object.assign({},r[i]);var s=t._.findIndex(a,function(e){return e.name==o.node.component_name});if(-1==s)return void console.error("Component name "+o.node.component_name+" not found in library");o.meta=a[s]}return o},e.GetActiveNodeAndMeta=function(e){var n={node:null,meta:null},o=e.store.getState().pageNodes,r=e.store.getState().library,a=e.store.getState().activeNodeId;if(a){var i=t._.findIndex(o,function(e){return e.id==a});if(-1==i)return void console.error("Node with id "+a+" not found in pageNodes");n.node=Object.assign({},o[i]);var s=t._.findIndex(r,function(e){return e.name==n.node.component_name});if(-1==s)return void console.error("Component name "+n.node.component_name+" not found in library");n.meta=r[s]}return n},e.GetChildNodes=function(n,o,r,a,i){void 0===n&&(n=null),void 0===o&&(o=null),void 0===r&&(r=new Array),void 0===a&&(a=new Array),void 0===i&&(i=!0);var s=t._.filter(r,function(e){return e.parent_id===n&&(!i||e.container_id===o)});t._.forEach(s,function(t){a.push(t.id),e.GetChildNodes(t.id,"",r,a,!1)})},e}(),Ie=function(){function e(){this.isOptionsModalVisible=!1,this.isSaveLoading=!1}return e.prototype.componentWillLoad=function(){this.store.mapStateToProps(this,function(e){return{isOptionsModalVisible:e.isOptionsModalVisible}}),this.store.mapDispatchToProps(this,{setOptionsModalState:t.setOptionsModalState,updateNodeOptions:t.updateNodeOptions,addReloadNodeIds:t.addReloadNodeIds})},e.prototype.cancelOptionsModalHandler=function(e){e.preventDefault(),e.stopPropagation(),this.setOptionsModalState(!1)},e.prototype.saveOptionsModalHandler=function(e){var n=this;n.isSaveLoading=!0,e.preventDefault();var o={},r=document.querySelectorAll("#modal-component-options .modal-body input, #modal-component-options .modal-body textarea, #modal-component-options .modal-body select");r&&r.length>0&&t._.forEach(r,function(e){var t=e.name;if(e.type&&"text"!==e.type&&"number"!==e.type&&"email"!==e.type&&"color"!==e.type&&"textarea"!==e.type&&"hidden"!==e.type)if("checkbox"===e.type){var n=!1;if(e.classList.contains("form-check-input")&&(n=!0),!t&&!n)return!0;var r=!1;if(n){r=document.querySelector('#modal-component-options .modal-body input[data-source-id="'+e.id+'"]').value;var a=e.getAttribute("data-field-name");o[a]=r}else e.checked&&(r=!0),o[t]=r}else"select"===e.tagName.toLowerCase()&&(o[t]=e.multiple?function(t){for(var n,o=[],r=e&&e.options,a=0,i=r.length;a<i;a++)(n=r[a]).selected&&o.push(n.value||n.text);return o}():e.value);else{if(!t)return!0;switch(e.type){case"number":var i=Number(e.value);isNaN(i)&&(i=null),o[t]=i;break;default:o[t]=e.value}}});var a=Ne.GetActiveNodeAndMeta(n),i=n.store.getState().siteRootUrl+"/api/v3.0/page/"+a.node.page_id+"/node/"+a.node.id+"/options/update",s=n.store.getState().recordId;s&&(i+="?recId="+s),le.post(i,o,{headers:{"Content-Type":"application/json;charset=UTF-8","Access-Control-Allow-Origin":"*"}}).then(function(o){var r=new Event("WvPbManager_Options_Changed"),i=new ue;i.original_event=e,i.node=a.node,i.component_name=a.node.component_name,r.payload=i,document.dispatchEvent(r);var s=t._.findIndex(o.data,function(e){return e.id===a.node.id});s>-1?Ne.GetNodeFromServerToStack(o.data[s],a,n):alert("Error: Node not found in returned results"),n.isSaveLoading=!1,n.setOptionsModalState(!1)}).catch(function(e){n.isSaveLoading=!1,e.response?e.response.data?alert(e.response.data):alert(e.response.statusText):e.message?alert(e.message):alert(e)})},e.prototype.render=function(){var e=this,t=e.isOptionsModalVisible,o=e.store.getState().activeNodeId;if(!t)return null;var r=Ne.GetNodeAndMeta(e,o).node.component_name.split(".");return n("div",{class:"modal show d-block",style:{paddingRight:"17px"},id:"modal-component-options"},n("div",{class:"modal-dialog modal-xl"},n("div",{class:"modal-content"},n("div",{class:"modal-header"},n("span",{class:"title"},n("span",{class:"go-teal"},r[r.length-1])," options"),n("span",{class:"aside"},"wv-",o)),n("div",{class:"modal-body",id:"modal-component-options-body"},n("wv-show-options",{nodeId:o})),n("div",{class:"modal-footer"},n("button",{type:"button",class:"btn btn-primary btn-sm",onClick:function(t){return e.saveOptionsModalHandler(t)},disabled:e.isSaveLoading},n("i",{class:e.isSaveLoading?"fa fa-spin fa-spinner":"fa fa-save"})," Save Options"),n("button",{type:"button",class:"btn btn-white btn-sm",onClick:function(t){return e.cancelOptionsModalHandler(t)}},"Close")))))},Object.defineProperty(e,"is",{get:function(){return"wv-options-modal"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"properties",{get:function(){return{isOptionsModalVisible:{state:!0},isSaveLoading:{state:!0},store:{context:"store"}}},enumerable:!0,configurable:!0}),e}();function Ce(e){var o=e.scope;if(!o.activeNodeId)return n("div",null,"Select a component to review its options");var r=o.store.getState().pageNodes,a=t._.findIndex(r,function(e){return e.id===o.activeNodeId});if(-1===a)return null;var i=r[a],s=o.store.getState().library,d=t._.findIndex(s,function(e){return e.name===i.component_name});if(-1===d)return null;var c=s[d],l={};return c.color&&(l={color:c.color}),[n("div",{class:"icon-card-body"},n("span",{class:"icon "+c.icon_class,style:l}),n("div",{class:"meta"},n("div",{class:"title"},c.label),n("div",{class:"description"},c.description),n("div",{class:"library"},c.library))),n("hr",{class:"divider",style:{margin:"5px 0"}}),n("div",{class:"row no-gutters"},n("div",{class:"col-6 pr-1"},n("button",{id:"wv-pb-inspector-options-btn",type:"button",class:"btn btn-white btn-sm btn-block",onClick:function(e){return o.showOptionsModalHandler(e)}},n("i",{class:o.isOptionsLoading?"fa fa-spin fa-spinner":"fa fa-cog"})," options")),n("div",{class:"col-6 pl-1"},n("button",{type:"button",class:"btn btn-white btn-sm btn-block",onClick:function(e){return o.showHelpModalHandler(e)}},n("i",{class:o.isHelpLoading?"fa fa-spin fa-spinner":"far fa-question-circle"})," help")))]}function Ee(e){var t=e.scope;if(t.activeNodeId)return n("a",{class:"go-red",href:"#",onClick:function(e){window.confirm("Are you sure you wish to delete this component?")&&t.deleteNodeHandler(e)}},n("i",{class:"ti-trash"})," delete node")}function Se(e){var t=Ne.GetActiveNodeAndMeta(e),n=e.store.getState().siteRootUrl+"/api/v3.0/page/"+t.node.page_id+"/node/"+t.node.id+"/delete",o=e.store.getState().recordId;o&&(n+="?recId="+o),le.post(n,null,{headers:{"Content-Type":"application/json;charset=UTF-8","Access-Control-Allow-Origin":"*"}}).then(function(){var n=new Event("WvPbManager_Node_Removed"),o=new ue;o.original_event=event,o.node=t.node,o.component_name=t.node.component_name,n.payload=o,document.dispatchEvent(n),e.removeNode(e.activeNodeId)}).catch(function(e){e.response?e.response.data?alert(e.response.data):alert(e.response.statusText):e.message?alert(e.message):alert(e)})}var _e=function(){function e(){this.isHelpLoading=!1,this.isOptionsLoading=!1}return e.prototype.componentWillLoad=function(){this.store.mapStateToProps(this,function(e){return{activeNodeId:e.activeNodeId}}),this.store.mapDispatchToProps(this,{removeNode:t.removeNode,setOptionsModalState:t.setOptionsModalState,setHelpModalState:t.setHelpModalState})},e.prototype.deleteNodeHandler=function(e){e.preventDefault(),e.stopPropagation(),Se(this)},e.prototype.showOptionsModalHandler=function(e){e.preventDefault(),e.stopPropagation(),document.getElementById("node-options-"+this.activeNodeId)?this.setOptionsModalState(!0):function(e){e.isOptionsLoading=!0;var t=Ne.GetNodeAndMeta(e,e.activeNodeId),n=null;if(t){var o=e.store.getState().siteRootUrl+t.meta.options_view_url+"&nid="+t.node.id+"&pid="+t.node.page_id,r=e.store.getState().recordId;r&&(o+="&recId="+r),le.post(o,t.node.options,{headers:{"Content-Type":"application/json;charset=UTF-8","Access-Control-Allow-Origin":"*"}}).then(function(n){var o=document.getElementById("wv-node-options-stack"),r=document.createElement("div");r.id="node-options-"+e.activeNodeId,r.innerHTML=n.data,o.appendChild(r),be(r);var a=new Event("WvPbManager_Options_Loaded"),i=new ue;i.node=t.node,i.component_name=t.node.component_name,a.payload=i,document.dispatchEvent(a),e.setOptionsModalState(!0),e.isOptionsLoading=!1}).catch(function(t){if(n=t.response?t.response.data?t.response.data:t.response.statusText:t.message?t.message:t){var o=document.getElementById("wv-node-"+e.activeNodeId),r=document.createElement("div");r.classList.add("alert"),r.classList.add("alert-danger"),r.classList.add("m-1"),r.classList.add("p-1"),r.innerHTML=n,o.appendChild(r),e.isOptionsLoading=!1}})}}(this)},e.prototype.showHelpModalHandler=function(e){e.preventDefault(),e.stopPropagation(),document.getElementById("node-help-"+this.activeNodeId)?this.setHelpModalState(!0):function(e){e.isHelpLoading=!0;var t=Ne.GetNodeAndMeta(e,e.activeNodeId),n=null;if(t){var o=e.store.getState().siteRootUrl+t.meta.help_view_url+"&nid="+t.node.id+"&pid="+t.node.page_id,r=e.store.getState().recordId;r&&(o+="&recId="+r),le.post(o,t.node.options,{headers:{"Content-Type":"application/json;charset=UTF-8","Access-Control-Allow-Origin":"*"}}).then(function(n){var o=document.getElementById("wv-node-help-stack"),r=document.createElement("div");r.id="node-help-"+e.activeNodeId,r.innerHTML=n.data,o.appendChild(r),be(r);var a=new Event("WvPbManager_Help_Loaded"),i=new ue;i.node=t.node,i.component_name=t.node.component_name,a.payload=i,document.dispatchEvent(a),e.setHelpModalState(!0),e.isHelpLoading=!1}).catch(function(t){if(n=t.response?t.response.data?t.response.data:t.response.statusText:t.message?t.message:t){var o=document.getElementById("wv-node-"+e.activeNodeId),r=document.createElement("div");r.classList.add("alert"),r.classList.add("alert-danger"),r.classList.add("m-1"),r.classList.add("p-1"),r.innerHTML=n,o.appendChild(r),e.isOptionsLoading=!1}})}}(this)},e.prototype.render=function(){return[n("div",{class:"header"},n("div",{class:"title"},"Inspector"),n("div",{class:"action pr-1"},n(Ee,{scope:this}))),n("div",{class:"body"},n(Ce,{scope:this}))]},Object.defineProperty(e,"is",{get:function(){return"wv-pb-inspector"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"properties",{get:function(){return{activeNodeId:{state:!0},isHelpLoading:{state:!0},isOptionsLoading:{state:!0},store:{context:"store"}}},enumerable:!0,configurable:!0}),e}(),xe=function(e){var t,n=("undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==u?u:"undefined"!=typeof module?module:Function("return this")()).Symbol;return"function"==typeof n?n.observable?t=n.observable:(t=n("observable"),n.observable=t):t="@@observable",t}(),Oe=function(){return Math.random().toString(36).substring(7).split("").join(".")},Te={INIT:"@@redux/INIT"+Oe(),REPLACE:"@@redux/REPLACE"+Oe(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+Oe()}};function Me(e,t,n){var o;if("function"==typeof t&&"function"==typeof n||"function"==typeof n&&"function"==typeof arguments[3])throw new Error("It looks like you are passing several store enhancers to createStore(). This is not supported. Instead, compose them together to a single function");if("function"==typeof t&&void 0===n&&(n=t,t=void 0),void 0!==n){if("function"!=typeof n)throw new Error("Expected the enhancer to be a function.");return n(Me)(e,t)}if("function"!=typeof e)throw new Error("Expected the reducer to be a function.");var r=e,a=t,i=[],s=i,d=!1;function c(){s===i&&(s=i.slice())}function l(){if(d)throw new Error("You may not call store.getState() while the reducer is executing. The reducer has already received the state as an argument. Pass it down from the top reducer instead of reading it from the store.");return a}function u(e){if("function"!=typeof e)throw new Error("Expected the listener to be a function.");if(d)throw new Error("You may not call store.subscribe() while the reducer is executing. If you would like to be notified after the store has been updated, subscribe from a component and invoke store.getState() in the callback to access the latest state. See https://redux.js.org/api-reference/store#subscribe(listener) for more details.");var t=!0;return c(),s.push(e),function(){if(t){if(d)throw new Error("You may not unsubscribe from a store listener while the reducer is executing. See https://redux.js.org/api-reference/store#subscribe(listener) for more details.");t=!1,c();var n=s.indexOf(e);s.splice(n,1)}}}function p(e){if(!function(e){if("object"!=typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}(e))throw new Error("Actions must be plain objects. Use custom middleware for async actions.");if(void 0===e.type)throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?');if(d)throw new Error("Reducers may not dispatch actions.");try{d=!0,a=r(a,e)}finally{d=!1}for(var t=i=s,n=0;n<t.length;n++)(0,t[n])();return e}return p({type:Te.INIT}),(o={dispatch:p,subscribe:u,getState:l,replaceReducer:function(e){if("function"!=typeof e)throw new Error("Expected the nextReducer to be a function.");r=e,p({type:Te.REPLACE})}})[xe]=function(){var e,t=u;return(e={subscribe:function(e){if("object"!=typeof e||null===e)throw new TypeError("Expected the observer to be an object.");function n(){e.next&&e.next(l())}return n(),{unsubscribe:t(n)}}})[xe]=function(){return this},e},o}var Le={},Ae=function(e,n){void 0===e&&(e=Le);var o=Object.assign({},e);switch(n.type){case t.SET_DRAKE:return o.drake=n.payload,o;case t.ADD_DRAKE_CONTAINER_ID:var r=document.getElementById(n.payload);return o.drake.containers.push(r),o;case t.SET_ACTIVE_NODE:return o.activeNodeId=o.activeNodeId&&o.activeNodeId===n.payload?null:n.payload,o;case t.HOVER_NODE:return o.hoveredNodeId=n.payload,n.payload&&(o.hoveredContainerId=null),o;case t.HOVER_CONTAINER:return o.hoveredContainerId=n.payload,n.payload&&(o.hoveredNodeId=null),o;case t.SET_NODE_CREATION:if(n.payload){document.body.className+=" modal-open",document.body.style.paddingRight="17px";var a=document.createElement("div");a.className="modal-backdrop show",a.id="wv-pb-backdrop",document.body.appendChild(a),o.isCreateModalVisible=!0,o.createdNode=n.payload}else document.body.className=document.body.className.replace(" modal-open","").replace("modal-open",""),document.body.style.paddingRight=null,(p=document.getElementById("wv-pb-backdrop"))&&p.parentNode.removeChild(p),o.isCreateModalVisible=!1,o.createdNode=null;return o;case t.ADD_NODE:o.activeNodeId=n.payload.id;var i=n.payload;return"object"!=typeof i.options&&(i.options=i.options?JSON.parse(i.options):{}),o.pageNodes=o.pageNodes.concat([i]),o.pageNodeChangeIndex++,document.body.className=document.body.className.replace(" modal-open","").replace("modal-open",""),document.body.style.paddingRight=null,(p=document.getElementById("wv-pb-backdrop"))&&p.parentNode.removeChild(p),o.isCreateModalVisible=!1,o.createdNode=null,o;case t.REMOVE_NODE:return o.pageNodes=t._.filter(o.pageNodes,function(e){return e.id.toLowerCase()!==n.payload.toLowerCase()}),o.activeNodeId=null,o.pageNodeChangeIndex++,o;case t.UPDATE_NODE_OPTIONS:var s=n.payload;if(s){"object"!=typeof s.options&&(s.options=s.options?JSON.parse(s.options):{});var d=t._.findIndex(o.pageNodes,function(e){return e.id===s.id});if(d>-1){var c=o.pageNodes[d];c.options=s.options,o.pageNodes=t._.filter(o.pageNodes,function(e){return e.id!==s.id}),o.pageNodes.push(c),o.pageNodeChangeIndex++}}return o;case t.UPDATE_PAGE_NODES:return t._.forEach(n.payload,function(e){"object"!=typeof e.options&&(e.options=e.options?JSON.parse(e.options):{}),o.pageNodes=n.payload,o.pageNodeChangeIndex++}),o;case t.SET_OPTIONS_MODAL_STATE:if(n.payload){document.body.className+=" modal-open",document.body.style.paddingRight="17px";var l=document.createElement("div");l.className="modal-backdrop show",l.id="wv-pb-backdrop",document.body.appendChild(l),o.isOptionsModalVisible=!0}else document.body.className=document.body.className.replace(" modal-open","").replace("modal-open",""),document.body.style.paddingRight=null,(p=document.getElementById("wv-pb-backdrop"))&&p.parentNode.removeChild(p),o.isOptionsModalVisible=!1;return o;case t.SET_HELP_MODAL_STATE:if(n.payload){document.body.className+=" modal-open",document.body.style.paddingRight="17px";var u=document.createElement("div");u.className="modal-backdrop show",u.id="wv-pb-backdrop",document.body.appendChild(u),o.isHelpModalVisible=!0}else{var p;document.body.className=document.body.className.replace(" modal-open","").replace("modal-open",""),document.body.style.paddingRight=null,(p=document.getElementById("wv-pb-backdrop"))&&p.parentNode.removeChild(p),o.isHelpModalVisible=!1}return o;case t.ADD_RELOAD_NODE_IDS:return n.payload&&(o.reloadNodeIdList=t._.concat(o.reloadNodeIdList,n.payload)),o;case t.REMOVE_RELOAD_NODE_IDS:return n.payload&&(o.reloadNodeIdList=t._.without(o.reloadNodeIdList,n.payload)),o;default:return e}},Pe=function(){this.library=new Array,this.pageNodes=new Array,this.pageId=null,this.siteRootUrl=null,this.drake=new Object,this.activeNodeId=null,this.hoveredNodeId=null,this.hoveredContainerId=null,this.pageNodeChangeIndex=1,this.isCreateModalVisible=!1,this.createdNode=new Object,this.isOptionsModalVisible=!1,this.isHelpModalVisible=!1,this.reloadNodeIdList=new Array,this.componentMeta=new Object,this.recordId=null},ke=function(e,t){return Array.prototype.slice.call(e,t)},Re="function"==typeof setImmediate?function(e){setImmediate(e)}:function(e){setTimeout(e,0)},je=t.commonjsGlobal.CustomEvent,He=function(){try{var e=new je("cat",{detail:{foo:"bar"}});return"cat"===e.type&&"bar"===e.detail.foo}catch(e){}return!1}()?je:"function"==typeof document.createEvent?function(e,t){var n=document.createEvent("CustomEvent");return t?n.initCustomEvent(e,t.bubbles,t.cancelable,t.detail):n.initCustomEvent(e,!1,!1,void 0),n}:function(e,t){var n=document.createEventObject();return n.type=e,t?(n.bubbles=Boolean(t.bubbles),n.cancelable=Boolean(t.cancelable),n.detail=t.detail):(n.bubbles=!1,n.cancelable=!1,n.detail=void 0),n},De=[],Be="",Ue=/^on/;for(Be in t.commonjsGlobal)Ue.test(Be)&&De.push(Be.slice(2));var Ve=De,Fe=t.commonjsGlobal.document,We=function(e,t,n,o){return e.addEventListener(t,n,o)},Ge=function(e,t,n,o){return e.removeEventListener(t,n,o)},qe=[];t.commonjsGlobal.addEventListener||(We=function(e,n,o){return e.attachEvent("on"+n,function(e,n,o){var r=Je(e,n,o)||function(e,n,o){return function(n){var r=n||t.commonjsGlobal.event;r.target=r.target||r.srcElement,r.preventDefault=r.preventDefault||function(){r.returnValue=!1},r.stopPropagation=r.stopPropagation||function(){r.cancelBubble=!0},r.which=r.which||r.keyCode,o.call(e,r)}}(e,0,o);return qe.push({wrapper:r,element:e,type:n,fn:o}),r}(e,n,o))},Ge=function(e,t,n){var o=Je(e,t,n);if(o)return e.detachEvent("on"+t,o)});var Xe={add:We,remove:Ge,fabricate:function(e,t,n){var o=-1===Ve.indexOf(t)?new He(t,{detail:n}):function(){var e;return Fe.createEvent?(e=Fe.createEvent("Event")).initEvent(t,!0,!0):Fe.createEventObject&&(e=Fe.createEventObject()),e}();e.dispatchEvent?e.dispatchEvent(o):e.fireEvent("on"+t,o)}};function Je(e,t,n){var o=function(e,t,n){var o,r;for(o=0;o<qe.length;o++)if((r=qe[o]).element===e&&r.type===t&&r.fn===n)return o}(e,t,n);if(o){var r=qe[o].wrapper;return qe.splice(o,1),r}}var Ye={},ze="(?:^|\\s)",Ke="(?:\\s|$)";function $e(e){var t=Ye[e];return t?t.lastIndex=0:Ye[e]=t=new RegExp(ze+e+Ke,"g"),t}var Qe={add:function(e,t){var n=e.className;n.length?$e(t).test(n)||(e.className+=" "+t):e.className=t},rm:function(e,t){e.className=e.className.replace($e(t)," ").trim()}},Ze=document,et=Ze.documentElement;function tt(e,n,o,r){t.commonjsGlobal.navigator.pointerEnabled?Xe[n](e,{mouseup:"pointerup",mousedown:"pointerdown",mousemove:"pointermove"}[o],r):t.commonjsGlobal.navigator.msPointerEnabled?Xe[n](e,{mouseup:"MSPointerUp",mousedown:"MSPointerDown",mousemove:"MSPointerMove"}[o],r):(Xe[n](e,{mouseup:"touchend",mousedown:"touchstart",mousemove:"touchmove"}[o],r),Xe[n](e,o,r))}function nt(e){if(void 0!==e.touches)return e.touches.length;if(void 0!==e.which&&0!==e.which)return e.which;if(void 0!==e.buttons)return e.buttons;var t=e.button;return void 0!==t?1&t?1:2&t?3:4&t?2:0:void 0}function ot(e,n){return void 0!==t.commonjsGlobal[n]?t.commonjsGlobal[n]:et.clientHeight?et[e]:Ze.body[e]}function rt(e,t,n){var o,r=e||{},a=r.className;return r.className+=" gu-hide",o=Ze.elementFromPoint(t,n),r.className=a,o}function at(){return!1}function it(){return!0}function st(e){return e.width||e.right-e.left}function dt(e){return e.height||e.bottom-e.top}function ct(e){return e.parentNode===Ze?null:e.parentNode}function lt(e){return"INPUT"===e.tagName||"TEXTAREA"===e.tagName||"SELECT"===e.tagName||function e(t){return!!t&&("false"!==t.contentEditable&&("true"===t.contentEditable||e(ct(t))))}(e)}function ut(e){return e.nextElementSibling||function(){var t=e;do{t=t.nextSibling}while(t&&1!==t.nodeType);return t}()}function pt(e,t){var n=function(e){return e.targetTouches&&e.targetTouches.length?e.targetTouches[0]:e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:e}(t),o={pageX:"clientX",pageY:"clientY"};return e in o&&!(e in n)&&o[e]in n&&(e=o[e]),n[e]}var ft=function(e,t){var n,o,r,a,i,s,d,c,l,u,p;1===arguments.length&&!1===Array.isArray(e)&&(t=e,e=[]);var f,v=null,h=t||{};void 0===h.moves&&(h.moves=it),void 0===h.accepts&&(h.accepts=it),void 0===h.invalid&&(h.invalid=function(){return!1}),void 0===h.containers&&(h.containers=e||[]),void 0===h.isContainer&&(h.isContainer=at),void 0===h.copy&&(h.copy=!1),void 0===h.copySortSource&&(h.copySortSource=!1),void 0===h.revertOnSpill&&(h.revertOnSpill=!1),void 0===h.removeOnSpill&&(h.removeOnSpill=!1),void 0===h.direction&&(h.direction="vertical"),void 0===h.ignoreInputTextSelection&&(h.ignoreInputTextSelection=!0),void 0===h.mirrorContainer&&(h.mirrorContainer=Ze.body),void 0===h.slideFactorY&&(h.slideFactorY=5),void 0===h.slideFactorX&&(h.slideFactorX=5);var m=function(e,t){var n=t||{},o={};return void 0===e&&(e={}),e.on=function(t,n){return o[t]?o[t].push(n):o[t]=[n],e},e.once=function(t,n){return n._once=!0,e.on(t,n),e},e.off=function(t,n){var r=arguments.length;if(1===r)delete o[t];else if(0===r)o={};else{var a=o[t];if(!a)return e;a.splice(a.indexOf(n),1)}return e},e.emit=function(){var t=ke(arguments);return e.emitterSnapshot(t.shift()).apply(this,t)},e.emitterSnapshot=function(t){var r=(o[t]||[]).slice(0);return function(){var o=ke(arguments),a=this||e;if("error"===t&&!1!==n.throws&&!r.length)throw 1===o.length?o[0]:o;return r.forEach(function(r){n.async?function(e,t,n){e&&Re(function(){e.apply(n||null,t||[])})}(r,o,a):r.apply(a,o),r._once&&e.off(t,r)}),e}},e}({containers:h.containers,start:function(e){var t=E(e);t&&S(t)},end:_,cancel:L,remove:M,destroy:function(){y(!0),O({})},canMove:function(e){return!!E(e)},dragging:!1});return!0===h.removeOnSpill&&m.on("over",function(e){Qe.rm(e,"gu-hide")}).on("out",function(e){m.dragging&&Qe.add(e,"gu-hide")}),y(),m;function g(e){return-1!==m.containers.indexOf(e)||h.isContainer(e)}function y(e){var t=e?"remove":"add";tt(et,t,"mousedown",I),tt(et,t,"mouseup",O)}function b(e){tt(et,e?"remove":"add","mousemove",C)}function w(e){var t=e?"remove":"add";Xe[t](et,"selectstart",N),Xe[t](et,"click",N)}function N(e){f&&e.preventDefault()}function I(e){if(s=e.clientX,d=e.clientY,1===nt(e)&&!e.metaKey&&!e.ctrlKey){var t=e.target,n=E(t);n&&(f=n,b(),"mousedown"===e.type&&(lt(t)?t.focus():e.preventDefault()))}}function C(e){if(f)if(0!==nt(e))if(void 0!==e.clientX&&Math.abs(e.clientX-s)<=(h.slideFactorX||0)&&void 0!==e.clientY&&Math.abs(e.clientY-d)<=(h.slideFactorY||0))console.log("boz");else{if(h.ignoreInputTextSelection){var t=pt("clientX",e),o=pt("clientY",e);if(lt(Ze.elementFromPoint(t,o)))return}var c=f;b(!0),w(),_(),S(c);var l,p={left:(l=r.getBoundingClientRect()).left+ot("scrollLeft","pageXOffset"),top:l.top+ot("scrollTop","pageYOffset")};a=pt("pageX",e)-p.left,i=pt("pageY",e)-p.top,Qe.add(u||r,"gu-transit"),function(){if(!n){var e=r.getBoundingClientRect();(n=r.cloneNode(!0)).style.width=st(e)+"px",n.style.height=dt(e)+"px",Qe.rm(n,"gu-transit"),Qe.add(n,"gu-mirror"),h.mirrorContainer.appendChild(n),tt(et,"add","mousemove",R),Qe.add(h.mirrorContainer,"gu-unselectable"),m.emit("cloned",n,r,"mirror")}}(),R(e)}else O({})}function E(e){if(!(m.dragging&&n||g(e))){for(var t=e;ct(e)&&!1===g(ct(e));){if(h.invalid(e,t))return;if(!(e=ct(e)))return}var o=ct(e);if(o&&!h.invalid(e,t)&&h.moves(e,o,t,ut(e)))return{item:e,source:o}}}function S(e){("boolean"==typeof h.copy?h.copy:h.copy(e.item,e.source))&&(u=e.item.cloneNode(!0),m.emit("cloned",u,e.item,"copy")),o=e.source,r=e.item,c=l=ut(e.item),m.dragging=!0,m.emit("drag",r,o)}function _(){if(m.dragging){var e=u||r;T(e,ct(e))}}function x(){f=!1,b(!0),w(!0)}function O(e){if(x(),m.dragging){var t=u||r,a=pt("clientX",e),i=pt("clientY",e),s=k(rt(n,a,i),a,i);s&&(u&&h.copySortSource||!u||s!==o)?T(t,s):h.removeOnSpill?M():L()}}function T(e,t){var n=ct(e);u&&h.copySortSource&&t===o&&n.removeChild(r),P(t)?m.emit("cancel",e,o,o):m.emit("drop",e,t,o,l),A()}function M(){if(m.dragging){var e=u||r,t=ct(e);t&&t.removeChild(e),m.emit(u?"cancel":"remove",e,t,o),A()}}function L(e){if(m.dragging){var t=arguments.length>0?e:h.revertOnSpill,n=u||r,a=ct(n),i=P(a);!1===i&&t&&(u?a&&a.removeChild(u):o.insertBefore(n,c)),i||t?m.emit("cancel",n,o,o):m.emit("drop",n,a,o,l),A()}}function A(){var e=u||r;x(),n&&(Qe.rm(h.mirrorContainer,"gu-unselectable"),tt(et,"remove","mousemove",R),ct(n).removeChild(n),n=null),e&&Qe.rm(e,"gu-transit"),p&&clearTimeout(p),m.dragging=!1,v&&m.emit("out",e,v,o),m.emit("dragend",e),o=r=u=c=l=p=v=null}function P(e,t){var a;return a=void 0!==t?t:n?l:ut(u||r),e===o&&a===c}function k(e,t,n){for(var a=e;a&&!i();)a=ct(a);return a;function i(){if(!1===g(a))return!1;var i=j(a,e),s=H(a,i,t,n);return!!P(a,s)||h.accepts(r,a,o,s)}}function R(e){if(n){e.preventDefault();var t=pt("clientX",e),s=pt("clientY",e),d=s-i;n.style.left=t-a+"px",n.style.top=d+"px";var p=u||r,f=rt(n,t,s),g=k(f,t,s),y=null!==g&&g!==v;(y||null===g)&&(v&&I("out"),v=g,y&&I("over"));var b=ct(p);if(g!==o||!u||h.copySortSource){var w,N=j(g,f);if(null!==N)w=H(g,N,t,s);else{if(!0!==h.revertOnSpill||u)return void(u&&b&&b.removeChild(p));w=c,g=o}(null===w&&y||w!==p&&w!==ut(p))&&(l=w,g.insertBefore(p,w),m.emit("shadow",p,g,o))}else b&&b.removeChild(p)}function I(e){m.emit(e,p,v,o)}}function j(e,t){for(var n=t;n!==e&&ct(n)!==e;)n=ct(n);return n===et?null:n}function H(e,t,n,o){var r,a="horizontal"===h.direction;return t!==e?(r=t.getBoundingClientRect(),(a?n>r.left+st(r)/2:o>r.top+dt(r)/2)?ut(t):t):function(){var t,r,i,s=e.children.length;for(t=0;t<s;t++){if(i=(r=e.children[t]).getBoundingClientRect(),a&&i.left+i.width/2>n)return r;if(!a&&i.top+i.height/2>o)return r}return null}()}},vt=function(){function e(){this.libraryJson="[]",this.pageNodesJson="",this.nodesPendingReload=new Array,this.pageNodes=new Array}return e.prototype.componentWillLoad=function(){var e=JSON.parse(this.libraryJson),n=new Array;this.pageNodesJson&&(n=JSON.parse(this.pageNodesJson)),t._.forEach(n,function(e){"object"!=typeof e.options&&(e.options=e.options?JSON.parse(e.options):{})});var o=new Pe;o.library=e,o.pageNodes=n,o.siteRootUrl=this.siteRootUrl,o.pageId=this.pageId,o.recordId=this.recordId,t._.forEach(e,function(e){o.componentMeta[e.name]=e}),this.store.setStore(Me(Ae,o)),this.store.mapStateToProps(this,function(e){return{pageNodes:e.pageNodes}}),this.store.mapDispatchToProps(this,{setDrake:t.setDrake,addReloadNodeIds:t.addReloadNodeIds,updatePageNodes:t.updatePageNodes,removeNode:t.removeNode});var r=this,a=ft({revertOnSpill:!0,direction:"vertical"});a.on("drop",function(e,n,o){var a=0;t._.forEach(e.parentElement.childNodes,function(t){if(t===e)return!1;a++});var i={originContainerId:o.getAttribute("data-container-id"),originParentNodeId:o.getAttribute("data-parent-id"),newContainerId:n.getAttribute("data-container-id"),newParentNodeId:n.getAttribute("data-parent-id"),newIndex:a},s=e.getAttribute("data-page-id"),d=e.getAttribute("data-node-id");!function(e,n){var o=new Array,r=e.store.getState().pageNodes;Ne.GetChildNodes(n.originParentNodeId,n.originContainerId,r,o),Ne.GetChildNodes(n.newParentNodeId,n.newContainerId,r,o),t._.forEach(o,function(e){Ne.MoveNodeToStack(e)}),e.nodesPendingReload=o}(r,i),function(e,n,o,r){var a=e.store.getState().siteRootUrl+"/api/v3.0/page/"+o+"/node/"+r+"/move",i=e.store.getState().recordId;i&&(a+="?recId="+i),le.post(a,n,{headers:{"Content-Type":"application/json;charset=UTF-8","Access-Control-Allow-Origin":"*"}}).then(function(n){e.updatePageNodes(n.data),window.setTimeout(function(){e.addReloadNodeIds(e.nodesPendingReload),e.nodesPendingReload=new Array,window.setTimeout(function(){t._.forEach(e.nodesPendingReload,function(t){var n=Ne.GetNodeAndMeta(e,t),o=new Event("WvPbManager_Node_Moved"),r=new ue;r.original_event=event,r.node=n.node,r.component_name=n.node.component_name,o.payload=r,document.dispatchEvent(o)});var n=Ne.GetNodeAndMeta(e,r),o=new Event("WvPbManager_Node_Moved"),a=new ue;a.original_event=event,a.node=n.node,a.component_name=n.node.component_name,o.payload=a,document.dispatchEvent(o);var i=document.querySelectorAll(".wv-container");t._.forEach(i,function(e){e.removeAttribute("style")})},10)},10)}).catch(function(e){console.log(e),alert("An error occurred during the move"),location.reload(!0)})}(r,i,s,d)}),a.on("drag",function(){var e=document.querySelectorAll(".wv-container");t._.forEach(e,function(e){e.setAttribute("style","width:"+e.offsetWidth+"px")})}),r.setDrake(a)},e.prototype.handleMouseMove=function(e){!function(e){for(var t=document.querySelectorAll(".wv-pb-content .actions"),n=t.length;n--;){var o=t[n];o.style.left=e.pageX+15+"px",o.style.top=e.pageY+25+"px"}}(e)},e.prototype.componentDidLoad=function(){var e=this;document.addEventListener("keydown",function(t){switch(t.key){case"Escape":var n=e.store.getState().drake;n.dragging&&n.cancel();break;case"Delete":var o=e.store.getState().activeNodeId,r=e.store.getState().isOptionsModalVisible,a=e.store.getState().isHelpModalVisible,i=e.store.getState().isCreateModalVisible;!o||r||a||i||window.confirm("Are you sure you wish to delete the selected component?")&&function(e){var t=Ne.GetActiveNodeAndMeta(e),n=e.store.getState().siteRootUrl+"/api/v3.0/page/"+t.node.page_id+"/node/"+t.node.id+"/delete",o=e.store.getState().recordId;o&&(n+="?recId="+o),le.post(n,null,{headers:{"Content-Type":"application/json;charset=UTF-8","Access-Control-Allow-Origin":"*"}}).then(function(){var n=new Event("WvPbManager_Node_Removed"),o=new ue;o.original_event=event,o.node=t.node,o.component_name=t.node.component_name,n.payload=o,document.dispatchEvent(n),e.removeNode(e.store.getState().activeNodeId)}).catch(function(e){e.response?alert(e.response.statusText+":"+e.response.data):e.message?alert(e.message):alert(e)})}(e)}},!1)},e.prototype.render=function(){var e=this,o=[],r=this.store.getState().library;return n("div",{id:"wv-page-manager-wrapper"},n("div",{class:"row no-gutters"},n("div",{class:"col"},n("div",{class:"wv-pb-content"},n("div",{class:"wb-pb-content-inner"},n("wv-pb-node-container",{"parent-node-id":null,containerId:""})))),n("div",{class:"col-auto",style:{width:"400px"}},n("wv-pb-inspector",null),n("wv-pb-tree",null))),this.pageNodes.map(function(a){var i=a.component_name;if(-1===t._.findIndex(o,function(e){return e===i})){var s=t._.findIndex(r,function(e){return e.name==i});if(s>-1)return r[s].service_js_url?(o.push(i),n("script",{key:a.id,src:e.siteRootUrl+r[s].service_js_url})):(console.info("Service not found for "+i),null)}return null}),n("div",{id:"wv-node-design-stack",class:"d-none"}),n("div",{id:"wv-node-options-stack",class:"d-none"}),n("div",{id:"wv-node-help-stack",class:"d-none"}),n("wv-create-modal",null),n("wv-help-modal",null),n("wv-options-modal",null))},Object.defineProperty(e,"is",{get:function(){return"wv-pb-manager"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"properties",{get:function(){return{libraryJson:{type:String,attr:"library-json"},nodesPendingReload:{state:!0},pageId:{type:String,attr:"page-id"},pageNodes:{state:!0},pageNodesJson:{type:String,attr:"page-nodes-json"},recordId:{type:String,attr:"record-id"},siteRootUrl:{type:String,attr:"site-root-url"},store:{context:"store"}}},enumerable:!0,configurable:!0}),Object.defineProperty(e,"listeners",{get:function(){return[{name:"mousemove",method:"handleMouseMove",passive:!0}]},enumerable:!0,configurable:!0}),e}(),ht=function(){function e(){this.isLoading=!1}return e.prototype.componentWillLoad=function(){this.nodeId&&(this.store.mapStateToProps(this,function(e){return{reloadNodeIdList:e.reloadNodeIdList}}),this.store.mapDispatchToProps(this,{removeReloadNodeIds:t.removeReloadNodeIds}))},e.prototype.nodeIndexUpdateHandler=function(e){var n=this;t._.findIndex(e,function(e){return e===n.nodeId})>-1&&(n.el.parentElement.classList.contains("gu-mirror")||(Ne.GetNodeFromStack(n.nodeId)||function(e){var t=Ne.GetNodeAndMeta(e,e.nodeId),n=null;if(t){var o=e.store.getState().siteRootUrl+t.meta.design_view_url+"&nid="+t.node.id+"&pid="+t.node.page_id,r=e.store.getState().recordId;r&&(o+="&recId="+r);var a=t.node.options;e.isLoading=!0,le.post(o,a,{headers:{"Content-Type":"application/json;charset=UTF-8","Access-Control-Allow-Origin":"*"}}).then(function(n){e.isLoading=!1;var o=document.getElementById("wv-node-"+e.nodeId),r=document.createElement("div");r.id="node-design-"+e.nodeId,r.classList.add("wv-pb-node"),r.innerHTML=n.data,o.appendChild(r),be(r);var a=new Event("WvPbManager_Design_Loaded"),i=new ue;i.node=t.node,i.component_name=t.node.component_name,a.payload=i,document.dispatchEvent(a)}).catch(function(t){if(n=t.response?t.response.data?t.response.data:t.response.statusText:t.message?t.message:t){var o=document.getElementById("wv-node-"+e.nodeId),r=document.createElement("div");r.classList.add("alert"),r.classList.add("alert-danger"),r.classList.add("m-1"),r.classList.add("p-1"),r.innerHTML=n,o.appendChild(r),e.isLoading=!1}})}}(n),n&&"function"==typeof n.removeReloadNodeIds&&n.removeReloadNodeIds(n.nodeId)))},e.prototype.render=function(){return this.el.parentElement.classList.contains("gu-mirror")?null:this.isLoading?n("wv-loading-pane",null):null},Object.defineProperty(e,"is",{get:function(){return"wv-pb-node"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"properties",{get:function(){return{el:{elementRef:!0},isLoading:{state:!0},nodeId:{type:String,attr:"node-id"},reloadNodeIdList:{state:!0,watchCallbacks:["nodeIndexUpdateHandler"]},store:{context:"store"}}},enumerable:!0,configurable:!0}),e}(),mt=function(){function e(){}return e.newGuid=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})},e}();function gt(e,n,o){var r=new Array;return t._.forEach(o,function(t){e||t.parent_id?e&&t.parent_id&&e.toLowerCase()===t.parent_id.toLowerCase()&&(n||t.container_id?n&&t.container_id&&n.toLowerCase()===t.container_id.toLowerCase()&&r.push(t):r.push(t)):n||t.container_id?n&&t.container_id&&n.toLowerCase()===t.container_id.toLowerCase()&&r.push(t):r.push(t)}),t._.sortBy(r,["weight"])}var yt=function(){function e(){this.containerId=null,this.parentNodeId=null}return e.prototype.componentWillLoad=function(){this.store.mapStateToProps(this,function(e){return{activeNodeId:e.activeNodeId,hoveredNodeId:e.hoveredNodeId,hoveredContainerId:e.hoveredContainerId,pageNodeChangeIndex:e.pageNodeChangeIndex}}),this.store.mapDispatchToProps(this,{addDrakeContainerId:t.addDrakeContainerId,hoverContainer:t.hoverContainer,hoverNode:t.hoverNode,setActiveNode:t.setActiveNode,setNodeCreation:t.setNodeCreation,addReloadNodeIds:t.addReloadNodeIds})},e.prototype.componentDidLoad=function(){this.addDrakeContainerId("wv-container-"+this.parentNodeId+"-"+this.containerId);var e=gt(this.parentNodeId,this.containerId,this.store.getState().pageNodes),n=new Array;t._.forEach(e,function(e){n.push(e.id)}),this.addReloadNodeIds(n)},e.prototype.pageNodeIndexChangeHandler=function(){var e="wv-container-"+this.parentNodeId+"-"+this.containerId,n=document.getElementById(e);if(n){var o=this.store.getState().drake;-1==t._.findIndex(o.containers,function(t){return t.id===e})&&o.containers.push(n)}},e.prototype.hoverContainerHandler=function(e){e.preventDefault(),e.stopPropagation(),this.hoverContainer("wv-container-"+this.parentNodeId+"-"+this.containerId)},e.prototype.unhoverContainerHandler=function(e){e.preventDefault(),e.stopPropagation();var t=e.target.parentNode.closest(".wv-pb-node.hovarable");if(t){var n=t.attributes["data-node-id"];n&&this.hoverNode(n.value)}else this.hoverContainer(null)},e.prototype.nodeClickHandler=function(e,t){e.preventDefault(),e.stopPropagation(),this.setActiveNode(t)},e.prototype.hoverNodeHandler=function(e){e.preventDefault(),e.stopPropagation();var t=e.target.getAttribute("data-node-id");this.hoverNode(t)},e.prototype.unhoverNodeHandler=function(e){e.preventDefault(),e.stopPropagation();var t=e.target.parentNode.closest(".wv-container-inner.hovarable");if(t){var n=t.attributes["data-container-id"];n&&this.hoverContainer(n.value)}else this.hoverNode(null)},e.prototype.addNodeHandler=function(e){e.preventDefault(),e.stopPropagation();var n=0,o=gt(this.parentNodeId,this.containerId,this.store.getState().pageNodes);t._.forEach(o,function(e){e.weight>n&&(n=e.weight)});var r={id:mt.newGuid(),container_id:this.containerId,parent_id:this.parentNodeId,weight:n+1,page_id:this.store.getState().pageId,component_name:null,node_id:null,options:{},nodes:[]};this.setNodeCreation(r)},e.prototype.render=function(){var e=this,t=this,o=gt(t.parentNodeId,t.containerId,t.store.getState().pageNodes),r="wv-container-"+t.parentNodeId+"-"+t.containerId,a="";t.containerId||(a+=" first"),t.hoveredContainerId==r&&(a+=" hovered"),0===o.length&&(a+=" empty");var i=t.store.getState().componentMeta;return n("div",{class:"wv-container-inner hovarable "+a,onClick:function(t){return e.addNodeHandler(t)},onMouseEnter:function(e){return t.hoverContainerHandler(e)},onMouseLeave:function(e){return t.unhoverContainerHandler(e)},"data-container-id":r},n("div",{class:"actions"},n("i",{class:"fa fa-plus go-green"})," add in ",t.containerId),n("div",{class:"wv-container",id:r,"data-parent-id":t.parentNodeId,"data-container-id":t.containerId},o.map(function(e){var o="";return t.activeNodeId&&e.id===t.activeNodeId&&(o+=" selected"),t.hoveredNodeId&&e.id===t.hoveredNodeId&&!t.hoveredContainerId&&(o+=" hovered"),i[e.component_name].is_inline&&(o+=" d-inline-block"),n("div",{key:e.id,id:"wv-node-"+e.id,class:"wv-node-wrapper draggable-node hovarable "+o,"data-node-id":e.id,"data-page-id":e.page_id,onClick:function(n){return t.nodeClickHandler(n,e.id)},onMouseEnter:function(e){return t.hoverNodeHandler(e)},onMouseLeave:function(e){return t.unhoverNodeHandler(e)}},n("div",{class:"actions"},n("i",{class:"fa fa-search go-blue"})," select ",i[e.component_name].label),n("wv-pb-node",{nodeId:e.id}))})))},Object.defineProperty(e,"is",{get:function(){return"wv-pb-node-container"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"properties",{get:function(){return{activeNodeId:{state:!0},containerId:{type:String,attr:"container-id"},hoveredContainerId:{state:!0},hoveredNodeId:{state:!0},pageNodeChangeIndex:{state:!0,watchCallbacks:["pageNodeIndexChangeHandler"]},parentNodeId:{type:String,attr:"parent-node-id"},store:{context:"store"}}},enumerable:!0,configurable:!0}),e}(),bt=function(){function e(){this.nodeId="",this.isHelpModalVisible=!1}return e.prototype.componentWillLoad=function(){this.store.mapStateToProps(this,function(e){return{isHelpModalVisible:e.isHelpModalVisible}});var e=document.getElementById("node-help-"+this.nodeId),t=document.getElementById("modal-component-help-body");e&&t.appendChild(e)},e.prototype.helpModalVisibilityHandler=function(e,t){if(!e&&t){var n=document.getElementById("wv-node-help-stack"),o=document.getElementById("node-help-"+this.nodeId);o&&n.appendChild(o)}},e.prototype.render=function(){return null},Object.defineProperty(e,"is",{get:function(){return"wv-show-help"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"properties",{get:function(){return{isHelpModalVisible:{state:!0,watchCallbacks:["helpModalVisibilityHandler"]},nodeId:{type:String,attr:"node-id"},store:{context:"store"}}},enumerable:!0,configurable:!0}),e}(),wt=function(){function e(){this.nodeId="",this.isOptionsModalVisible=!1}return e.prototype.componentWillLoad=function(){this.store.mapStateToProps(this,function(e){return{isOptionsModalVisible:e.isOptionsModalVisible}});var e=document.getElementById("node-options-"+this.nodeId),t=document.getElementById("modal-component-options-body");e&&t.appendChild(e)},e.prototype.optionsModalVisibilityHandler=function(e,t){if(!e&&t){var n=document.getElementById("wv-node-options-stack"),o=document.getElementById("node-options-"+this.nodeId);o&&n.appendChild(o)}},e.prototype.render=function(){return null},Object.defineProperty(e,"is",{get:function(){return"wv-show-options"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"properties",{get:function(){return{isOptionsModalVisible:{state:!0,watchCallbacks:["optionsModalVisibilityHandler"]},nodeId:{type:String,attr:"node-id"},store:{context:"store"}}},enumerable:!0,configurable:!0}),e}();e.WvCreateModal=ve,e.WvHelpModal=he,e.WvLoadingPane=me,e.WvOptionsModal=Ie,e.WvPbInspector=_e,e.WvPbManager=vt,e.WvPbNode=ht,e.WvPbNodeContainer=yt,e.WvShowHelp=bt,e.WvShowOptions=wt,Object.defineProperty(e,"__esModule",{value:!0})});